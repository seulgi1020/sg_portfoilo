<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>Three.js 기본 예제1</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>

    <script src="https://unpkg.com/three@0.141.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.141.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://unpkg.com/three@0.141.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://unpkg.com/three@0.141.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://unpkg.com/three@0.141.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://unpkg.com/three@0.141.0/examples/js/loaders/OBJLoader.js"></script>
<script src="https://unpkg.com/three@0.141.0/examples/js/loaders/MTLLoader.js"></script>
    <script>
        // 장면(Scene) 생성
        let scene = new THREE.Scene();
        scene.background = new THREE.Color(0x111111);

        // 카메라 생성 시야각,화면종횡비,근접제한,원거리
        //시야각 : 카메라가 보는 시야각, 값이 클수록 넓게, 작을수록 좁고 확대된 느낌
        //화면종횡비:카메라 화면의 비율, 일반적 브라우저의 창 크기
        //근접제한 : 카메라로부터 이거리보다 가까우면 안보이게(렌더링 되지 않도록)
        //원거리 : 카메라로부터 이 거리보다 멀면 안 보이게(렌더링 되지 않도록)
        let camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
        camera.rotation.y = 45 / 180 * Math.PI;
        //camera.position.set(800, 100, 1000);//x,y,z
        camera.position.set(2, 2, 2);//x,y,z

        // 렌더러 생성 및 설정
        let renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // 컨트롤 추가
        const controls = new THREE.OrbitControls(camera,renderer.domElement);

        // 빛 추가
        const light = new THREE.DirectionalLight(0xffffff,1);//색상,쎄기
        light.position.set(1,1,1).normalize();
        scene.add(light);

        // GLTF 모델 불러오기 (예시 URL)
        /*      const geometry = new THREE.BoxGeometry(); //형태
             const material = new THREE.MeshNormalMaterial(); //재질
             const cube = new THREE.Mesh(geometry,material); //물체(형태,재질)
             scene.add(cube); */
        // GLTF 모델 불러오기 (예시 URL)
        let loader = new THREE.GLTFLoader();
        const mtlLoader = new THREE.MTLLoader();
mtlLoader.load('./3d/pharma1.mtl', function (materials) {
  materials.preload();

  // OBJLoader에 재질 적용 후 OBJ 로딩
  const objLoader = new THREE.OBJLoader();
  objLoader.setMaterials(materials);

  objLoader.load(
    './3d/pharma1.obj',
    function (object) {
      scene.add(object);
    },
    undefined,
    function (error) {
      console.error('모델 로딩 오류:', error);
    }
  );
}); 
      

        // 애니메이션 루프
        function animate() {
            //console.log('[+] animate()');
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        // 애니메이션 루프

        animate();
    </script>
</body>

</html>